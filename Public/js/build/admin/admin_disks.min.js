$(function(){function a(t,e){Strack.open_dialog("dialog",{title:StrackLang.Disks_Modify_Title,width:480,height:480,content:Strack.dialog_dom({type:"normal",hidden:[{case:101,id:"Mdisks_id",type:"hidden",name:"id",valid:1,value:t.id}],items:[{case:1,id:"Mdisks_name",type:"text",lang:StrackLang.Name,name:"name",valid:"1",value:t.name},{case:1,id:"Mdisks_code",type:"text",lang:StrackLang.Code,name:"code",valid:"1",value:t.code},{case:3,id:"Mdisks_config",type:"text",lang:StrackLang.Config,name:"config",valid:"1"}],footer:[{obj:"disks_update",type:1,title:StrackLang.Update},{obj:"dialog_cancel",type:8,title:StrackLang.Cancel}]}),inits:function(){Strack.init_json_editor("Mdisks_config",{},t.config)},close:function(){$("#"+e).datagrid("reload"),Strack.destroy_json_editor("Mdisks_config")}})}obj={disks_add:function(){var t=Strack.validate_form("add_disks");200===t.status&&$.ajax({type:"POST",url:DisksPHP.addDisks,data:JSON.stringify(t.data),dataType:"json",contentType:"application/json",beforeSend:function(){$.messager.progress({title:StrackLang.Waiting,msg:StrackLang.loading})},success:function(t){$.messager.progress("close"),200===parseInt(t.status)?(Strack.top_message({bg:"g",msg:t.message}),obj.disks_reset()):layer.msg(t.message,{icon:7,time:1200,anim:6})}})},disks_modify:function(){var t=$("#datagrid_box").datagrid("getSelections");t.length<1?layer.msg(StrackLang.Please_Select_One,{icon:2,time:1200,anim:6}):1<t.length?layer.msg(StrackLang.Only_Choose_One,{icon:2,time:1200,anim:6}):a(t[0],"datagrid_box")},disks_update:function(){Strack.ajax_dialog_form("#st_dialog_form .dialog-widget-val","",DisksPHP.modifyDisks,{back:function(t){200===parseInt(t.status)?(Strack.dialog_cancel(),Strack.top_message({bg:"g",msg:t.message})):layer.msg(t.message,{icon:7,time:1200,anim:6})}})},disks_delete:function(){Strack.ajax_grid_delete("datagrid_box","id",StrackLang.Delete_Disks_Notice,DisksPHP.deleteDisks)},disks_reset:function(){$("#datagrid_box").datagrid("reload")}},0<$("#json_editor").length&&Strack.init_json_editor("json_editor"),$("#datagrid_box").datagrid({url:DisksPHP.getDisksGridData,rownumbers:!0,nowrap:!0,fitColumns:Strack.fit_columns(".admin-dept-right",1004),height:Strack.panel_height(".admin-dept-right",0),DragSelect:!0,adaptive:{dom:".admin-dept-right",min_width:1004,exth:0},frozenColumns:[[{field:"id",checkbox:!0}]],columns:[[{field:"disk_id",title:StrackLang.ID,align:"center",width:80,frozen:"frozen",findex:0,formatter:function(t,e,a){return e.id}},{field:"name",title:StrackLang.Name,align:"center",width:180},{field:"code",title:StrackLang.Code,align:"center",width:180},{field:"config",title:StrackLang.Config,align:"center",width:600,formatter:function(t,e,a){return JSON.stringify(t)}}]],toolbar:"#tb",pagination:!0,pageSize:100,pageList:[100,200],pageNumber:1,pagePosition:"bottom",remoteSort:!1,onDblClickRow:function(t,e){$(this).datagrid("selectRow",t),a(e,"datagrid_box")}})});