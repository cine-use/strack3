$(function(){obj={save_config:function(){var e=Strack.validate_form("add_email");200===e.status&&$.ajax({type:"POST",url:EmailPHP.saveEmailSetting,data:e.data,dataType:"json",beforeSend:function(){$.messager.progress({title:StrackPHP.Waiting,msg:StrackPHP.loading})},success:function(e){$.messager.progress("close"),200==parseInt(e.status)?Strack.top_message({bg:"g",msg:e.message}):layer.msg(e.message,{icon:7,time:1200,anim:6})}})},send_test_email:function(){var e=$("#test_email").val(),a=$("#test_account").val();0===e.length?layer.msg(EmailPHP.Email_Test_Content_Null,{icon:2,time:1200,anim:6}):0===a.length?layer.msg(EmailPHP.Email_Test_Account,{icon:2,time:1200,anim:6}):$.ajax({type:"POST",url:EmailPHP.testSendEmail,dataType:"json",data:{email_content:e,email_account:a},beforeSend:function(){$.messager.progress({title:StrackPHP.Waiting,msg:StrackPHP.loading})},success:function(e){$.messager.progress("close");var a='<p style="font-weight: 600;color: #FF4949">发送结果: '+e.result+"</p><p>接收邮件账号: "+e.email_account+"</p><p>发送邮件内容: "+e.email_content+"</p>";$("#test_email_result").empty().append(a)}})}},$.ajax({type:"POST",url:EmailPHP.getEmailSetting,dataType:"json",success:function(e){var a=e.open_email?e.open_email:0;Strack.init_open_switch({dom:"#email_open",value:a,onText:StrackLang.Switch_ON,offText:StrackLang.Switch_OFF,width:100});var t=e.smtp_auth?e.smtp_auth:0;Strack.init_open_switch({dom:"#email_smtp_auth",value:t,onText:StrackLang.Switch_ON,offText:StrackLang.Switch_OFF,width:100});var s=e.smtp_secure?e.smtp_secure:"";Strack.combobox_widget("#email_smtp_secure",{url:StrackPHP.getSmtpSecureList,valueField:"id",textField:"name",width:300,height:30,value:s}),$("#email_charset").val(e.charset),$("#email_server").val(e.server),$("#email_port").val(e.port).inputmask("9{1,6}"),$("#email_user").val(e.username).inputmask("email"),$("#email_pass").val(e.password),$("#email_addresser_name").val(e.addresser_name)}})});